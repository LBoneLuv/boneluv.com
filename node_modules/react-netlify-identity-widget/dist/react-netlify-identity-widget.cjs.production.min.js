"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=e(require("react")),n=require("@reach/dialog"),r=e(require("@reach/visually-hidden")),a=require("react-netlify-identity"),l=require("@reach/tabs");function o(){var e=t.useState(!1),n=e[0],r=e[1],a=t.useRef(!1);return t.useEffect(function(){return a.current=!0,function(){a.current=!1}},[]),[n,function(e){return r(!0),e.finally(function(){return a.current&&r(!1)})}]}function i(e){var n=e.onLogin,l=a.useIdentityContext().loginUser,i=t.useRef(null),s=t.useState(""),u=s[0],c=s[1],m=o(),d=m[0],p=m[1];return t.createElement("form",{ref:i,className:"form",onSubmit:function(e){e.preventDefault();var t=e.target;p(l(t.email.value,t.password.value,!0)).then(function(e){n&&n(e)}).catch(function(e){return void console.error(e)||c("Error: "+e.message)})}},t.createElement("div",{className:"RNIW_formGroup",key:"email"},t.createElement("label",null,t.createElement(r,null,"Enter your email"),t.createElement("input",{className:"RNIW_formControl",type:"email",name:"email",placeholder:"Email",autoCapitalize:"off",required:!0}),t.createElement("div",{className:"RNIW_inputFieldIcon RNIW_inputFieldEmail"}))),t.createElement("div",{className:"RNIW_formGroup",key:"password"},t.createElement("label",null,t.createElement(r,null,"Enter your password"),t.createElement("input",{className:"RNIW_formControl",type:"password",name:"password",placeholder:"Password",required:!0}),t.createElement("div",{className:"RNIW_inputFieldIcon RNIW_inputFieldPassword"}))),t.createElement("div",null,t.createElement("button",{type:"submit",className:d?"RNIW_btn RNIW_saving":"RNIW_btn"},"Log in"),u&&t.createElement("pre",{style:{background:"salmon",padding:10}},u)),t.createElement("button",{type:"button",className:"RNIW_btnLink forgotPasswordLink"},"Forgot password?"))}function s(e){var n=e.onLogout,r=a.useIdentityContext(),l=t.useState(""),i=l[0],s=l[1],u=r&&r.user&&r.user.user_metadata&&r.user.user_metadata.full_name||"NoName",c=o(),m=c[0],d=c[1];return t.createElement(t.Fragment,null,t.createElement("div",{className:"RNIW_header"},t.createElement("button",{className:"RNIW_btn RNIW_btnHeader active"},"Logged in")),t.createElement("form",{className:"form "},t.createElement("p",{className:"RNIW_infoText"},"Logged in as ",t.createElement("br",null),t.createElement("span",{className:"RNIW_infoTextEmail"},u)),t.createElement("button",{type:"submit",className:m?"RNIW_btn RNIW_saving":"RNIW_btn",onClick:function(){return d(r.logoutUser()).then(function(){n&&n()}).catch(function(e){return void console.error(e)||s("Error: "+e.message)})}},"Log out"),i&&t.createElement("pre",{style:{background:"salmon",padding:10}},i)))}function u(e){var n=e.onSignup,l=a.useIdentityContext().signupUser,i=t.useRef(null),s=t.useState(""),u=s[0],c=s[1],m=o(),d=m[0],p=m[1];return t.createElement("form",{ref:i,className:"form",onSubmit:function(e){e.preventDefault(),i.current&&p(l(i.current.email.value,i.current.password.value,{signupSource:"react-netlify-identity-widget",full_name:i.current.username.value})).then(function(e){n&&n(e)}).catch(function(e){return void console.error(e)||c("Error: "+e.message)})}},t.createElement("div",{className:"RNIW_formGroup",key:"username"},t.createElement("label",null,t.createElement(r,null,"Enter your name"),t.createElement("input",{id:"username",className:"RNIW_formControl",type:"name",name:"username",placeholder:"Name",autoCapitalize:"off",required:!0}),t.createElement("div",{className:"RNIW_inputFieldIcon RNIW_inputFieldName"}))),t.createElement("div",{className:"RNIW_formGroup",key:"email"},t.createElement("label",null,t.createElement(r,null,"Enter your email"),t.createElement("input",{className:"RNIW_formControl",type:"email",name:"email",placeholder:"Email",autoCapitalize:"off",required:!0}),t.createElement("div",{className:"RNIW_inputFieldIcon RNIW_inputFieldEmail"}))),t.createElement("div",{className:"RNIW_formGroup",key:"password"},t.createElement("label",null,t.createElement(r,null,"Enter your password"),t.createElement("input",{className:"RNIW_formControl",type:"password",name:"password",placeholder:"Password",required:!0}),t.createElement("div",{className:"RNIW_inputFieldIcon RNIW_inputFieldPassword"}))),t.createElement("div",null,t.createElement("button",{type:"submit",className:d?"RNIW_btn RNIW_saving":"RNIW_btn"},"Sign Up"),u&&t.createElement("pre",{style:{background:"salmon",padding:10}},u)))}function c(){var e=a.useIdentityContext().settings;if(!Object.entries(e.external).some(function(e){var t=e[1];return["github","gitlab","bitbucket","google"].includes(e[0])&&t}))return null;var n=!1;return"undefined"!=typeof window&&(n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))),t.createElement("div",{className:"providersGroup"},n&&t.createElement("pre",null,"⚠️Testing providers on localhost won't work because OAuth redirects to your production site"),t.createElement("hr",{className:"RNIW_hr"}),t.createElement(m,{settings:e,provider:"Google"}),t.createElement(m,{settings:e,provider:"GitHub"}),t.createElement(m,{settings:e,provider:"GitLab"}),t.createElement(m,{settings:e,provider:"Bitbucket"}))}function m(e){var n=e.provider;if(!e.settings.external[n.toLowerCase()])return null;var r=a.useIdentityContext().loginProvider;return t.createElement("button",{onClick:function(){return r(n.toLowerCase())},className:"provider"+n+" RNIW_btn RNIW_btnProvider"},"Continue with ",n)}function d(e){return t.createElement("div",null,t.createElement(l.Tabs,{defaultIndex:0},t.createElement(l.TabList,{className:"RNIW_header"},t.createElement(l.Tab,{className:"RNIW_btn RNIW_btnHeader"},"Login"),t.createElement(l.Tab,{className:"RNIW_btn RNIW_btnHeader"},"Sign Up")),t.createElement(l.TabPanels,null,t.createElement(l.TabPanel,null,t.createElement(i,{onLogin:e.onLogin})),t.createElement(l.TabPanel,null,t.createElement(u,{onSignup:e.onSignup})))),t.createElement(c,null))}function p(e){return t.createElement(s,{onLogout:e.onLogout})}function N(e){var n=a.useIdentityContext(),r=Boolean(n&&n.user);return t.createElement(r?p:d,Object.assign({},e))}var f=a.IdentityContextProvider,E=a.useIdentityContext;function b(e){var a=e.showDialog,l=e.onCloseDialog,o=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t.indexOf(n=l[r])>=0||(a[n]=e[n]);return a}(e,["showDialog","onCloseDialog"]);return t.createElement(n.Dialog,{isOpen:a,onDismiss:l,style:{border:"solid 5px hsla(0, 0%, 0%, 0.5)",borderRadius:"10px",position:"relative",maxWidth:400}},t.createElement("button",{className:"RNIW_btn RNIW_btnClose",onClick:l},t.createElement(r,null,"Close")),t.createElement(N,Object.assign({},o)))}Object.defineProperty(exports,"useNetlifyIdentity",{enumerable:!0,get:function(){return a.useNetlifyIdentity}}),exports.IdentityContextProvider=f,exports.IdentityModal=b,exports.default=b,exports.useIdentityContext=E;
//# sourceMappingURL=react-netlify-identity-widget.cjs.production.min.js.map
